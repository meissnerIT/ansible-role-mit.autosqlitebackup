#!/usr/bin/env bash
#
# Managed by ansible (mit.autosqlitebackup)
# DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
#
# v2020-11-03-1

if [ -f /etc/default/autosqlitebackup ] ; then
        . /etc/default/autosqlitebackup
else
    echo "/etc/default/autosqlitebackup is missing!"
    exit 1
fi

if [ ! -d "${BACKUPDIR}" ]; then
    echo "BACKUPDIR=${BACKUPDIR} is not a directory!"
    exit 1
fi

# Delete all backups older than 365 days
find ${BACKUPDIR} -type f \( -name "*.sql.gz" -o -name "*.sql.bz2" \) -mtime +365 \
    -exec rm -v {} \; | logger -t $0

